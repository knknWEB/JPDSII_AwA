<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<ui:composition template="/templates/main.xhtml">

	<ui:define name="title">
		Edycja profilu - Serwis STOP dla odlewni
	</ui:define>

	<f:metadata>
	    <f:viewAction action="#{userEditBB.onLoad()}" />
	</f:metadata>

	<ui:define name="content">

		<ui:insert name="pageContent">
		    <section id="about" class="about">

        <div class="container" data-aos="fade-up">
            <div class="row gx-0">
				<p>Edycja profilu użytkownika #{remoteClient.details.login}</p>
				<p:messages id="msg" />
	<h2>Obecne dane:</h2>	
	<h:form id="form-table-view" style="margin-bottom:1em;">
		<p:dataTable id="users" value="#{userListBB.logged}" var="u">
			<p:column>
				<f:facet name="header">
					<h:outputText value="Imię" />
				</f:facet>
				<h:outputText value="#{u.name}" />
			</p:column>
			<p:column>
				<f:facet name="header">
					<h:outputText value="Nazwisko" />
				</f:facet>
				<h:outputText value="#{u.surname}" />
			</p:column>	
			<p:column>
			<f:facet name="header">
					<h:outputText value="Miasto" />
				</f:facet>
				<h:outputText value="#{u.city}" />
			</p:column>
			<p:column>
			<f:facet name="header">
					<h:outputText value="Kod pocztowy" />
				</f:facet>
				<h:outputText value="#{u.postcode}" />
			</p:column>
			<p:column>
			<f:facet name="header">
					<h:outputText value="Ulica" />
				</f:facet>
				<h:outputText value="#{u.street}" />
			</p:column>
			<p:column>
			<f:facet name="header">
					<h:outputText value="Numer" />
				</f:facet>
				<h:outputText value="#{u.nofHouse}/#{u.nofFlat}" />
			</p:column>
		</p:dataTable>
	</h:form>

	<div class="card" style="float: left; margin:1em;">
		<h2>Dane do edycji:</h2>
    		<h:form rendered="#{userEditBB.user!=null}">
			<h:panelGrid columns="3" cellpadding="5">
			
				<h:outputLabel for="u-name" value="imie:" />
				<p:inputText id="u-name" value="#{userEditBB.user.name}"
					required="true" requiredMessage="Podaj imie"
					validatorMessage="co najwyżej 40 znaków">
					<f:validateLength maximum="40" />
				</p:inputText>
				<p:message for="u-name" display="icon"/>
				
				<h:outputLabel for="u-surname" value="nazwisko:" />
				<p:inputText id="u-surname" value="#{userEditBB.user.surname}"
					required="true" requiredMessage="Podaj nazwisko"
					validatorMessage="co najwyżej 40 znaków">
					<f:validateLength maximum="40" />
				</p:inputText>
				<p:message for="u-surname" display="icon"/>
				
				<h:outputLabel for="u-mail" value="mail:" />
				<p:inputText id="u-mail" value="#{userEditBB.user.mail}"
					required="true" requiredMessage="Podaj mail"
					validatorMessage="co najwyżej 40 znaków">
					<f:validateLength maximum="40" />
				</p:inputText>
				<p:message for="u-mail" display="icon"/>
				
				<h:outputLabel for="u-city" value="miasto:" />
				<p:inputText id="u-city" value="#{userEditBB.user.city}"
					validatorMessage="co najwyżej 40 znaków">
					<f:validateLength maximum="40" />
				</p:inputText>
				<p:message for="u-city" display="icon"/>
				
				<h:outputLabel for="u-post" value="kod pocztowy:" />
				<p:inputText id="u-post" value="#{userEditBB.user.postcode}"
					validatorMessage="co najwyżej 40 znaków">
					<f:validateLength maximum="40" />
				</p:inputText>
				<p:message for="u-post" display="icon"/>
				
				<h:outputLabel for="u-street" value="ulica:" />
				<p:inputText id="u-street" value="#{userEditBB.user.street}"
					validatorMessage="co najwyżej 40 znaków">
					<f:validateLength maximum="40" />
				</p:inputText>
				<p:message for="u-street" display="icon"/>
				
				<h:outputLabel for="u-nofHouse" value="numer domu:" />
				<p:inputText id="u-nofHouse" value="#{userEditBB.user.nofHouse}"
					validatorMessage="co najwyżej 40 znaków">
					<f:validateLength maximum="40" />
				</p:inputText>
				<p:message for="u-nofHouse" display="icon"/>
				
				<h:outputLabel for="u-nofFlat" value="numer mieszkania:" />
				<p:inputText id="u-nofFlat" value="#{userEditBB.user.nofFlat}"
					validatorMessage="co najwyżej 40 znaków">
					<f:validateLength maximum="40" />
				</p:inputText>
				<p:message for="u-nofFlat" display="icon"/>
				
			<p:commandButton value="Zapisz" action="#{userEditBB.saveData()}"
				style="margin-right: 1em;" update="msg" />
				
			<p:button value="Anuluj" outcome="panel" style="margin-right: 1em;"/>
			

		</h:panelGrid>
		</h:form>
    
    
</div>
  <div class="col-lg-6 d-flex align-items-center" data-aos="zoom-out" data-aos-delay="200">
                <img src="/imgages/dron/sen1.jpg" class="img-fluid" alt="" />
            </div>
            </div>
        </div>
    </section>
 
<section id="values" class="values">
    <div class="container" data-aos="fade-up">
        <header class="section-header">
          <p>„Samotni możemy zrobić niewiele; razem możemy zrobić tak wiele.”</p>
          <h2>Helen Keller</h2>
        </header>
    </div>
</section>

		
		</ui:insert>
	</ui:define>
	
</ui:composition>
</html>